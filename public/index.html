<?xml version="1.0" encoding="UTF-8"?>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
	<title>VakioMax</title>
	<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.js"></script>          
	<script type="text/javascript">
	function makeVeikkausUrl(event, t, pastedRows) {
	    event.preventDefault();
	    var address="https://www.veikkaus.fi/mobile?area=wagering&game=sport&op=checkGame&t=" + t + "&type=normal";
	    rows = pastedRows.split(/[\n\r]+/);
	    for (var i = 0; i < rows.length; i++) {
                var aRow = rows[i];
                var cleanedUpRow = aRow.replace(/[^1xX2]/g,"").toUpperCase()
                for (var j=0; j < cleanedUpRow.length; j++) {
                    var rowNum = (i + 1).toString(16);
                    var gameId = (j + 1).toString(16);
                    var gameResult = cleanedUpRow[j];
                    address += "&I" + rowNum + gameId + "=" + gameResult;
                }
            }
            return(address);
        };
        </script>
    </head>
    <body>
	<form action="#">
	    <fieldset>
		<legend>Vakiorivit</legend>
		<p>
		    <label>Pelityyppi<select id="gameType">
			    <option value="1" selected="true">Lauantaivakio</option>
			    <option value="2">2</option>
			    <option value="3">3</option>
			    <option value="4">4</option>
			</select>
		    </label>
		</p>
		<p>
		    <textarea id="pastedRows" cols="40" rows="12"></textarea> 
		    <input type="submit" id="submitPastedRows" value="Siirry Veikkauksen kuponkisivulle" />
		</p>
	    </fieldset>
	</form>
	<script type="text/javascript" >
	$("#submitPastedRows").click(function(event) { 
	    var veikkausUrl = makeVeikkausUrl(event, $("#gameType").val(), $("#pastedRows").val());
	    window.location = veikkausUrl;
	});
	</script>
    </body>
</html>
